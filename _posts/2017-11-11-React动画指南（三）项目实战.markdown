---
layout: post
title:  "React动画指南（三）项目实战"
date:   2017-11-11 08:25:49 +0800
categories:  
tags: 
tags: 
    - react
    - 笔记
---


![1](https://i.imgur.com/usfOfNq.gif)


打开powershell，如果报错说找不到，则有必要安装。
操作：

	npm install react-addons-transition-group -save-dev

官网说，但没有试过

	Run npm install --save react-transition-group@1.x

In previous post, i put TweenMax.js file in folder and import it directly, but it is better to use npm module of gsap in Production environment.
或许要安装TweenMax模块

	npm install --save-dev gsap


Door1.js

```javascript
import React, {Component} from 'react'
import { render } from 'react-dom';
import TransitionGroup from 'react-addons-transition-group';
import TweenMax from 'gsap';
import { Expo } from 'gsap/EasePack'

class BoxTop extends React.Component {
    componentWillEnter (callback) {
        const el = this.container;
        TweenMax.fromTo(el, 0.9, {scaleY: 0}, {scaleY: 1, onComplete: callback, ease:Expo.easeInOut});
    }
    componentWillLeave (callback) {
        const el = this.container;
        TweenMax.fromTo(el, 0.9, {scaleY: 1}, {scaleY:0,  onComplete: callback, ease:Expo.easeInOut});
    }
    render () {
        var style={
            width: "100%",
            height: "50%"
            //backgroundColor:"blue"
        }
        return <div className="top" style={style} ref={c => this.container = c}/>;
    }
}

class BoxBtm extends React.Component {
    componentWillEnter (callback) {
        const el = this.container;
        TweenMax.fromTo(el, 0.9, {scaleY: 0}, {scaleY: 1, onComplete: callback, ease:Expo.easeInOut});
    }
    componentWillLeave (callback) {
        const el = this.container;
        TweenMax.fromTo(el, 0.9, {scaleY: 1}, {scaleY:0,  onComplete: callback, ease:Expo.easeInOut});
    }
    render () {
        var style={
            width: "100%",
            height: "50%"
            //backgroundColor:"blue"
        }
        return <div className="btm" style={style} ref={c => this.container = c}/>;
    }
}

export default class Door1 extends Component {
    constructor() {
        super();
        this.state = {value: '0',
            url:"produce.html",
            shouldShowBox:false
        }
        this.onStarted = this.onStarted.bind(this);
        window.myObject.started.add(this.onStarted);

    }
    onStarted(param1, param2){
        this.state.value = param1;
        this.state.url = param2;
        this.setState({
            shouldShowBox: !this.state.shouldShowBox
        });
    }
    componentWillMount(){
        console.log("componentWillMount",this.state.value);
        var top = document.getElementById("door-top");
        console.log("1top",top);
    }
    //初始化
    componentDidMount(){
        console.log(this.state.value);
        var top = document.getElementById("door-top");
    }
    render() {
        var style;
        style={
            width: "100%",
            height: "100%",
            display: "block",
            opacity: "1"
        }
        return(
            <div className="abs door" style={style} >
                <TransitionGroup>
                    { this.state.shouldShowBox && <BoxTop/>}
                    { this.state.shouldShowBox && <BoxBtm/>}
                </TransitionGroup>
            </div>
        )
    }
}
```


Nav1.js

```javascript
import React, {Component} from 'react'


export default class Navi1 extends Component {
    constructor() {
        super();
        this.handleSaveClicked = this.handleSaveClicked.bind(this);
    }

    handleSaveClicked (e){
        var a = e.target.getAttribute("data-href2");
        window.myObject.started.dispatch("jump",a);
    }
    render() {
        var arr = this.props.title.split(",");
        let test ={
            height:"123px",
            zIndex:"127777"
        }
        return(
            <div className="abs right-part close no-tw" style={test}>
                <div className="bg70"></div>
                <ul className="" >
                    <li className="active"><a data-href2="product.html" onClick={this.handleSaveClicked}>我们的产品</a></li>
                    <li><a data-href2="about.html" onClick={this.handleSaveClicked}>澳摩油的故事</a></li>
                    <li><a data-href2="contact.html" onClick={this.handleSaveClicked}>联系我们</a></li>
                    <li><div className="li-wxicon"><img onClick={this.handleSaveClicked} className="weixin-icon" src="images/weixin-icon.png" /></div>
                        <div className="elmore_oil_qr_code"><img className="ptimg" src="images/qr_code.png" /></div>
                    </li>
                </ul>
        </div>)
    }
}
```





#### 参考 ####

